<!doctype html>
<html>
<head>
    <title>Logger Stat</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8"/>
    <link href='css/bootstrap.min.css' rel="stylesheet"/>
    <link href="css/style.css" type="text/css" rel="stylesheet"/>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="js/lang.js" type="text/javascript" charset="utf8"></script>
    <script src="js/common.js" type="text/javascript" charset="utf8"></script>
    <script src="js/bootstrap.min.js" type="text/javascript" charset="utf8"></script>
</head>
<body>

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <h3>
                Logger Stat
            </h3>
            <span class="pull-right" style="font-size: 16px; margin-right: 20px;">
          						<label langkey="RefreshPeriod" class="lang" style="display: inline;"
                                       for="name">Refresh Period</label>
                     <input type="text" class="form-control" id="name" placeholder="请输入名称">
                <!--          						<a id="btnSuspendRefresh" langkey="SuspendRefresh" class="btn btn-primary lang"-->
                <!--                                   href="javascript:druid.sql.switchSuspendRefresh();">Suspend Refresh</a>-->
                    	<a id="btnSuspendRefresh" langkey="SuspendRefresh" class="btn btn-primary lang"
                           href="javascript:druid.sql.search();">Search</a>
          					</span>
            </h3>
            <table id="dataTable" class="table table-bordered table-striped responsive-utilities">
                <thead>
                <tr>
                    <th>N</th>
                    <th width="20"><a id="th-name">name</a></th>
                    <th width="50"><a id="th-configuredLevel" class="lang" langKey="configuredLevel">configuredLevel</a></th>
                    <th width="50"><a id="th-configuredLevelDesc" class="lang" langKey="configuredLevelDesc">configuredLevelDesc</a>
                    </th>
                    <th width="50"><a id="th-effectiveLevel" class="lang" langKey="effectiveLevel">effectiveLevel</a>
                    </th>
                    <th width="50"><a id="th-effectiveLevelDesc" class="lang" langKey="effectiveLevelDesc">effectiveLevelDesc</a></th>
                    <th width="50"><a id="th-operate" class="lang" langKey="operate">操作</a></th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>
<script type="text/javascript">
    $.namespace("dlog.logger");
    dlog.logger = function () {
        return {
            init: function () {
                dlog.common.ajaxuri = '/logger/level/confs';
                dlog.common.handleCallback = dlog.logger.handleAjaxResult;
                dlog.common.ajaxRequestForBasicInfo();
            },
            // switchSuspendRefresh: function () {
            //     dlog.logger.disableAutoRefresh = !dlog.logger.disableAutoRefresh;
            //     if (dlog.logger.disableAutoRefresh) {
            //         $("#btnSuspendRefresh").addClass("btn-warning").removeClass("btn-primary");
            //     } else {
            //         $("#btnSuspendRefresh").addClass("btn-primary").removeClass("btn-warning");
            //     }
            // },
            search: function () {
                dlog.logger.controlRefresh({name: $("#name").val()});
            },
            handleAjaxResult: function (data) {
                // var sqlStatList = data.Content;
                var sqlStatList = data;
                if (sqlStatList == null) return;

                var sqlStatTable = document.getElementById("dataTable");
                while (sqlStatTable.rows.length > 1) {
                    sqlStatTable.deleteRow(1);
                }

                var html = "";
                for (var i = 0; i < sqlStatList.length; i++) {
                    var stat = sqlStatList[i];
                    html += "<tr>";
                    html += "<td>" + (i + 1) + "</td>";
                    html += "<td>" + replace(stat.name) + "</td>";
                    html += "<td>" + replace(stat.configuredLevel) + "</td>";
                    html += "<td>" + replace(stat.configuredLevelDesc) + "</td>";
                    html += "<td>" + replace(stat.effectiveLevel) + "</td>";
                    html += "<td>" + replace(stat.effectiveLevelDesc) + "</td>";
                    html += "<td><select style=\"width:80px;\">" +
                        "<option value=\"10\">10s</option>" +
                        "<option value=\"10\">10s</option>" +
                        "<option value=\"10\">10s</option>" +
                        "<option value=\"10\">10s</option>" +
                        "<option value=\"10\">10s</option>" +
                        "</select></td>";
                    html += "</tr>";
                }
                $("#dataTable tbody").html(html);
                dlog.common.stripes();
            }
        }
    }();

    $(document).ready(function () {
        dlog.logger.init();
    });
</script>
</body>
</html>
